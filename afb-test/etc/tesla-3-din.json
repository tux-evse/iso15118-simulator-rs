{
  "binding":[
    {
      "uid":"iso15118-simulator",
      "info":"./afb-test/trace-logs/tesla-3-din.pcap",
      "api":"iso15118-${SIMULATION_MODE}",
      "path":"${INJECTOR_BINDING_DIR}/libafb_injector.so",
      "simulation":"${SIMULATION_MODE}",
      "target":"iso15118-simulator",
      "autorun":0,
      "delay":{
        "percent":10,
        "min":50,
        "max":100
      },
      "minimal":true,
      "scenarios":[
        {
          "uid":"tesla-3-din:1",
          "timeout":2216,
          "transactions":[
            {
              "uid":"sdp-evse",
              "verb":"din:sdp_evse_req",
              "injector_only":true,
              "query":{
                "action":"discover"
              },
              "retry":{
                "timeout":3000,
                "delay":100,
                "count":1
              }
            },
            {
              "uid":"app-set-protocol",
              "verb":"din:app_proto_req",
              "injector_only":true,
              "retry":{
                "timeout":3000,
                "delay":100,
                "count":1
              }
            },
            {
              "uid":"pkg:47",
              "verb":"din:session_setup_req",
              "delay":13,
              "query":{
                "id":"[dc,44,27,1d,cd,45]",
                "tagid":"session_setup_req",
                "proto":"din",
                "msgid":0
              },
              "expect":{
                "id":"[44,45,2a,50,4e,58,2a,45,31,32,33,34,35,2a,31]",
                "rcode":"new_session",
                "tagid":"session_setup_res",
                "proto":"din",
                "msgid":1
              },
              "retry":{
                "timeout":3000,
                "delay":13,
                "count":1
              }
            },
            {
              "uid":"pkg:50",
              "verb":"din:service_discovery_req",
              "delay":16,
              "query":{
                "category":"ev_charger",
                "tagid":"service_discovery_req",
                "proto":"din",
                "msgid":2
              },
              "expect":{
                "rcode":"ok",
                "charging":{
                  "tag":{
                    "id":1,
                    "category":"ev_charger"
                  },
                  "transfer":"dc_extended",
                  "isfree":false
                },
                "payments":[
                  "external"
                ],
                "tagid":"service_discovery_res",
                "proto":"din",
                "msgid":3
              },
              "retry":{
                "timeout":3000,
                "delay":16,
                "count":1
              }
            },
            {
              "uid":"pkg:53",
              "verb":"din:payment_selection_req",
              "delay":18,
              "query":{
                "option":"external",
                "services":[
                  {
                    "service_id":1
                  }
                ],
                "tagid":"payment_selection_req",
                "proto":"din",
                "msgid":27
              },
              "expect":{
                "rcode":"ok",
                "tagid":"payment_selection_res",
                "proto":"din",
                "msgid":28
              },
              "retry":{
                "timeout":3000,
                "delay":18,
                "count":1
              }
            },
            {
              "uid":"pkg:56",
              "verb":"din:contract_authentication_req",
              "delay":16,
              "query":{
                "tagid":"contract_authentication_req",
                "proto":"din",
                "msgid":15
              },
              "expect":{
                "rcode":"ok",
                "processing":"ongoing",
                "tagid":"contract_authentication_res",
                "proto":"din",
                "msgid":16
              },
              "retry":{
                "timeout":3000,
                "delay":16,
                "count":3
              }
            },
            {
              "uid":"pkg:67",
              "verb":"din:param_discovery_req",
              "delay":322,
              "query":{
                "transfer_mode":"dc_extended",
                "dc_evparam":{
                  "status":{
                    "ready":true,
                    "error":"no_error",
                    "evress_soc":57
                  },
                  "max_voltage":{
                    "value":4230,
                    "multiplier":-1,
                    "unit":"volt"
                  },
                  "max_current":{
                    "value":5490,
                    "multiplier":-1,
                    "unit":"ampere"
                  },
                  "max_power":{
                    "value":2320,
                    "multiplier":2,
                    "unit":"watt"
                  }
                },
                "tagid":"param_discovery_req",
                "proto":"din",
                "msgid":17
              },
              "expect":{
                "rcode":"ok",
                "tuples":[
                  {
                    "id":1,
                    "pmax":{
                      "id":1,
                      "entries":[
                        {
                          "value":10000,
                          "relative_time_interval":{
                            "start":0,
                            "duration":86400
                          }
                        }
                      ]
                    }
                  }
                ],
                "evse_dc_charge_param":{
                  "status":{
                    "error":"ready",
                    "notification":"none",
                    "delay":0,
                    "isolation_status":"invalid"
                  },
                  "max_voltage":{
                    "value":900,
                    "multiplier":0,
                    "unit":"volt"
                  },
                  "min_voltage":{
                    "value":180,
                    "multiplier":0,
                    "unit":"volt"
                  },
                  "max_current":{
                    "value":25,
                    "multiplier":0,
                    "unit":"ampere"
                  },
                  "min_current":{
                    "value":0,
                    "multiplier":0,
                    "unit":"ampere"
                  },
                  "current_ripple":{
                    "value":0,
                    "multiplier":0,
                    "unit":"ampere"
                  },
                  "max_power":{
                    "value":10000,
                    "multiplier":0,
                    "unit":"watt"
                  },
                  "regul_tolerance":{
                    "value":1,
                    "multiplier":0,
                    "unit":"ampere"
                  },
                  "energy_to_deliver":{
                    "value":10000,
                    "multiplier":0,
                    "unit":"wh"
                  }
                },
                "tagid":"param_discovery_res",
                "proto":"din",
                "msgid":18
              },
              "retry":{
                "timeout":3000,
                "delay":322,
                "count":1
              }
            },
            {
              "uid":"pkg:70",
              "verb":"din:cable_check_req",
              "delay":19,
              "query":{
                "status":{
                  "ready":true,
                  "error":"no_error",
                  "evress_soc":57
                },
                "tagid":"cable_check_req",
                "proto":"din",
                "msgid":9
              },
              "expect":{
                "rcode":"ok",
                "status":{
                  "error":"ready",
                  "notification":"none",
                  "delay":0,
                  "isolation_status":"invalid"
                },
                "processing":"ongoing",
                "tagid":"cable_check_res",
                "proto":"din",
                "msgid":10
              },
              "retry":{
                "timeout":3000,
                "delay":19,
                "count":383
              }
            },
            {
              "uid":"pkg:1344",
              "verb":"din:pre_charge_req",
              "delay":55,
              "query":{
                "status":{
                  "ready":true,
                  "error":"no_error",
                  "evress_soc":57
                },
                "target_voltage":{
                  "value":3700,
                  "multiplier":-1,
                  "unit":"volt"
                },
                "target_current":{
                  "value":0,
                  "multiplier":-1,
                  "unit":"ampere"
                },
                "tagid":"pre_charge_req",
                "proto":"din",
                "msgid":31
              },
              "expect":{
                "rcode":"ok",
                "status":{
                  "error":"ready",
                  "notification":"none",
                  "delay":0,
                  "isolation_status":"valid"
                },
                "voltage":{
                  "value":4999,
                  "multiplier":-1,
                  "unit":"volt"
                },
                "tagid":"pre_charge_res",
                "proto":"din",
                "msgid":32
              },
              "retry":{
                "timeout":3000,
                "delay":55,
                "count":4
              }
            },
            {
              "uid":"pkg:1357",
              "verb":"din:power_delivery_req",
              "delay":18,
              "query":{
                "ready":true,
                "dc_delivery_params":{
                  "status":{
                    "ready":true,
                    "error":"no_error",
                    "evress_soc":57
                  },
                  "charge_complete":false
                },
                "tagid":"power_delivery_req",
                "proto":"din",
                "msgid":29
              },
              "expect":{
                "rcode":"ok",
                "dc_evse_status":{
                  "error":"ready",
                  "notification":"none",
                  "delay":0,
                  "isolation_status":"valid"
                },
                "tagid":"power_delivery_res",
                "proto":"din",
                "msgid":30
              },
              "retry":{
                "timeout":3000,
                "delay":18,
                "count":1
              }
            },
            {
              "uid":"pkg:1360",
              "verb":"din:current_demand_req",
              "delay":18,
              "query":{
                "status":{
                  "ready":true,
                  "error":"no_error",
                  "evress_soc":57
                },
                "voltage_target":{
                  "value":4230,
                  "multiplier":-1,
                  "unit":"volt"
                },
                "current_target":{
                  "value":0,
                  "multiplier":-1,
                  "unit":"ampere"
                },
                "charging_complete":false,
                "voltage_limit":{
                  "value":4230,
                  "multiplier":-1,
                  "unit":"volt"
                },
                "current_limit":{
                  "value":5490,
                  "multiplier":-1,
                  "unit":"ampere"
                },
                "power_limit":{
                  "value":2320,
                  "multiplier":2,
                  "unit":"watt"
                },
                "tagid":"current_demand_req",
                "proto":"din",
                "msgid":21
              },
              "expect":{
                "rcode":"ok",
                "status":{
                  "error":"ready",
                  "notification":"none",
                  "delay":0,
                  "isolation_status":"valid"
                },
                "voltage":{
                  "value":4999,
                  "multiplier":-1,
                  "unit":"volt"
                },
                "current":{
                  "value":0,
                  "multiplier":-1,
                  "unit":"ampere"
                },
                "current_limit_reach":false,
                "voltage_limit_reach":false,
                "power_limit_reach":false,
                "voltage_limit":{
                  "value":900,
                  "multiplier":0,
                  "unit":"volt"
                },
                "current_limit":{
                  "value":25,
                  "multiplier":0,
                  "unit":"ampere"
                },
                "power_limit":{
                  "value":10000,
                  "multiplier":0,
                  "unit":"watt"
                },
                "tagid":"current_demand_res",
                "proto":"din",
                "msgid":22
              },
              "retry":{
                "timeout":3000,
                "delay":18,
                "count":1816
              }
            },
            {
              "uid":"pkg:7607",
              "verb":"din:power_delivery_req",
              "delay":19,
              "query":{
                "ready":false,
                "dc_delivery_params":{
                  "status":{
                    "ready":true,
                    "error":"no_error",
                    "evress_soc":57
                  },
                  "charge_complete":false
                },
                "tagid":"power_delivery_req",
                "proto":"din",
                "msgid":29
              },
              "expect":{
                "rcode":"ok",
                "dc_evse_status":{
                  "error":"ready",
                  "notification":"none",
                  "delay":0,
                  "isolation_status":"valid"
                },
                "tagid":"power_delivery_res",
                "proto":"din",
                "msgid":30
              },
              "retry":{
                "timeout":3000,
                "delay":19,
                "count":1
              }
            },
            {
              "uid":"pkg:7610",
              "verb":"din:session_stop_req",
              "delay":14,
              "query":{
                "tagid":"session_stop_req",
                "proto":"din",
                "msgid":33
              },
              "expect":{
                "rcode":"ok",
                "tagid":"session_stop_res",
                "proto":"din",
                "msgid":34
              },
              "retry":{
                "timeout":3000,
                "delay":14,
                "count":1
              }
            },
            {
              "uid":"sdp-evse",
              "verb":"iso2:sdp_evse_req",
              "injector_only":true,
              "query":{
                "action":"forget"
              },
              "retry":{
                "timeout":3000,
                "delay":100,
                "count":1
              }
            }
          ]
        }
      ]
    }
  ]
}